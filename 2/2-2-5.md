# 文件查找命令## find### 格式：	find [目录] [选项] 参数	find [-path……] -options [-print -exec -ok]### 功能：在系统特定目录下，查找具有某种特征的文件或目录。  ### 说明：  find指令用于查找符合条件的文件。任何位于选项之前的字符串都将被视为欲查找的目录。需要注意的是，find命令会占用系统大量资源。目录(path),要查找的目录路径：	~ 表示 $HOME 目录	. 表示当前目录	/ 表示根目录注：若使用目录路径为“/”，通常需要查找较多的时间，可以指定更为确切的路径以减少查找时间。选项：  print：  表示将结果输出到标准输出。exec：    对匹配的文件执行该参数所给出的shell命令。形式为`command{} \;`，注意`{}`与`\;`之间有空格。	$ find/bin–namels–exec{}\;ok：与exec作用相同，区别在于，在执行命令之前，都会给出提示，让用户确认是否执行。常用选项：	-name<文件名>		根据文件名进行查找，-name选项是最常用的选项。	-user<用户名>		根据文件的属主进行查找	-nouser：		查找无有效属主的文件	-group<组名>		根据文件的属组进行查找	-nogroup：		查找无有效所属组的文件	-size<文件大小>		根据文件的大小进行查找，可以在文件大小前加+、-、=符号，分别表示大于、小于和等于文件大小。	-type<文件类型>		根据文件类型进行查找。			b-块设备文件。			d-目录。			c-字符设备文件。			p-管道文件。			l-符号链接文件。			f-普通文件。	安装权限查找	-perm	不在当前指定的目录下查找	-prune		时间选项：			-aminn	：查找n分钟以前被访问过的所有文件。			-atimen	：查找n天以前被访问过的所有文件。			-cminn	：查找n分钟以前文件状态被修改过的所有文件。			-ctimen	：查找n天以前文件状态被修改过的所有文件。			-mminn	：查找n分钟以前文件内容被修改过的所有文件。			-mtimen	：查找n天以前文件内容被修改过的所有文件。			-print		：将搜索结果输出到标准输出。### 示例：(1)、按名字查找-name选项支持通配符`"*"` 和 `"?"`:			`$ find /etc-name "*.txt" > file.txt`在/etc目录及子目录中，查找大写字母开头的txt文件:	`$ find/etc-name'[A-Z]*.txt'-print`在/etc及其子目录中，查找host开头的文件:	$find/etc-name'host*'-print在$HOME目录及其子目录中，查找所有文件	`$find ~ -name '*' -print`在当前目录及子目录中，查找不是out开头的txt文件:	`$find . -name "out*" -prune -o- name "*.txt" -print`要想让系统高负荷运行，就从根目录开始查找所有的文件：	`$find/-name"*"`在/etc目录下查找所有的目录:	$find /etc -typed –print在当前目录下查找文件长度大于1M字节的文件:	$find . -size+1000000 –print(2)、按目录查找在当前目录除aa之外的子目录内搜索txt文件:	`$find . -path "./aa" -prune -o -name "*.txt" -print`在当前目录及除aa和bb之外的子目录中查找txt文件:	`$find.\(-path"./aa"-o-path"./bb"\)-prune-o-name"*.txt"-print`在当前目录，不再子目录中，查找txt文件:	`$find.!-name"."-typed-prune-o-typef-name"*.txt"-print`(3)、按权限查找  在当前目录及子目录中，查找属主具有读写执行，其他具有读执行权限的文件:	$ find . -perm 755 -print(4)、按类型查找在当前目录及子目录下，查找符号链接文件:	$ find . -typel -print(5)、按属主及属组查找属主是william的文件:	$ find / -user william -typef -print查找属主被删除的文件:	$find / -nouser -typef -print查找属组mysql的文件:	$find / -group mysql -typef -print查找用户组被删掉的文件:	$find / -nogroup -typef -print(6)、按时间查找  查找2天内被更改过的文件:	$find.-mtime-2-typef-print查找2天前被更改过的文件:	$find.-mtime+2-typef-print查找一天内被访问的文件:	$ find.-atime-1-typef-print查找一天前被访问的文件:	$ find.-atime+1-typef-print查找一天内状态被改变的文件:	$ find.-ctime-1-typef-print查找一天前状态被改变的文件	$ find.-ctime+1-typef-print查找10分钟以前状态被改变的文件:	$find.-cmin+10-typef-print	(7)、按文件新旧	查找比aa.txt新的文件:		$ find . -newer "aa.txt" -typef -print	查找比aa.txt旧的文件:		$ find . !-newer "aa.txt" -typef -print	查找比aa.txt新，比bb.txt旧的文件:		$ find . -newer 'aa.txt' !-newer 'bb.txt' -typef -print	(8)、按大小查找	查找超过1M的文件:		$ find / -size+1M -typef -print	查找等于6字节的文件:		$ find . -size 6c -print	查找小于32k的文件:		$ find . -size-32k -print	(9)、执行命令	查找del.txt并删除，删除前提示确认:		$find . -name 'del.txt '-ok rm{}\;	查找aa.txt并备份为aa.txt.bak:		$find . -name 'aa.txt' -exec cp{}{}.bak\;	(10)、混合查找	find命令可以使用混合查找的方法，例如，想在`/etc`目录中查找大于500000字节，并且在24小时内修改的某个文件，则可以使用`-and`（与）把两个查找参数链接起来组合成一个混合的查找方式，如		$find /etc -size+500000c -and -mtime+1	(11)、练习	在根目录下查找网络的配置文件net.conf    	查找用户tlww的所有文件，并将查询结果保存到find.txt文件   	在/etc目录下查找所有的符号链接文件  	在/home/目录下查找文件长度恰好为100字节的文件  ## grep  说明：grep增强型的find。grep是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。格式：	grep[选项][字符串pattern][文件或目录]功能：查找文件里符合条件的字符串或多个文件中包含字符串pattern的行。选项：	-i 不区分大小写地搜索。默认情况区分大小写;	-w 只匹配整个单词，而不是字符串的一部分（如匹配‘magic’，而不是‘magical’）	-v 反检索，只显示不匹配的行。	-c 打印匹配的行数 -l：从多个文件中查找包含匹配项 -n：打印包含匹配项的行和行标如何grep多个pattern：显示匹配pattern1或pattern2的行：	greppattern1\|pattern2files	greppattern1files\|greppattern2显示既匹配pattern1又匹配pattern2的行；网络上有很多文章谈及如何grep多个pattern。可是貌似都是从一处引用的，引用如下：命令行参数：	grep -i patternfiles：不区分大小写地搜索。默认情况区分大小写，	grep -l patternfiles：只列出匹配的文件名，	grep -L patternfiles：列出不匹配的文件名，	grep -w patternfiles：只匹配整个单词，而不是字符串的一部分（如匹配‘magic’，而不是‘magical’），	grep -C numberpatternfiles：匹配的上下文分别显示[number]行，	grep pattern1 | pattern2files：显示匹配pattern1或pattern2的行，	grep pattern1files | greppattern2：显示既匹配pattern1又匹配pattern2的行。看到红色斜体行，即grep多个pattern的方法。可是我们知道'|',在linux的shell里起管道符作用，所以在bash/csh里，shell会把pattern2当命令看待，这样就会报错。正确方法可以是：grep'pattten1\|pattern2'files![grep](http://books.qianrushi.org/linux/2/images/grep.png)当然还可以同时找更多的pattern：	$ grep 'pattten1\|pattern2\|pattern3' files另外还有种写法：	$ grep -e 'pattern1' -e 'pattern2' -e 'pattern3' files示例：	$ cat/etc/services|more	$ ls–l|grep "linux"查找`/etc/services`中匹配tcp的行：	$ grep "tcp" /etc/services查找/etc/services中的非注释行：	$ grep –v "#" /etc/services