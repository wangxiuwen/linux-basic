# 任务管理
(1)、kill
强制关闭进程：
kill-9XXX
kill-s9XXX
kill–aux
(2)、top(任务管理器)
实时显示所有进程的状态，而且会动态的刷新。
-b	把结果输出到其它文件当中
	top命令是Linux下常用的性能分析工具，能够实时显示系统中各个进程的资源占用状况，类似于Windows的任务管理器。下面详细介绍它的使用方法。
top-01:06:48up1:22,1user,loadaverage:0.06,0.60,0.48
Tasks:29total,1running,28sleeping,0stopped,0zombie
Cpu(s):0.3%us,1.0%sy,0.0%ni,98.7%id,0.0%wa,0.0%hi,0.0%si
Mem:191272ktotal,173656kused,17616kfree,22052kbuffers
Swap:192772ktotal,0kused,192772kfree,123988kcached
PIDUSERPRNIVIRTRESSHRS%CPU%MEMTIME+COMMAND
1379root160797624561980S0.71.30:11.03sshd
14704root1602128980796R0.70.50:02.72top
1root1601992632544S0.00.30:00.90init
2root3419000S0.00.00:00.00ksoftirqd/0
3rootRT0000S0.00.00:00.00watchdog/0
统计信息区
前五行是系统整体的统计信息。第一行是任务队列信息，同uptime命令的执行结果。其内容如下：
01:06:48当前时间
up1:22系统运行时间，格式为时:分
1user当前登录用户数
loadaverage:0.06,0.60,0.48系统负载，即任务队列的平均长度。
三个数值分别为1分钟、5分钟、15分钟前到现在的平均值。
第二、三行为进程和CPU的信息。当有多个CPU时，这些内容可能会超过两行。内容如下：
Tasks:29total进程总数
1running正在运行的进程数
28sleeping睡眠的进程数
0stopped停止的进程数
0zombie僵尸进程数
Cpu(s):0.3%us用户空间占用CPU百分比
1.0%sy内核空间占用CPU百分比
0.0%ni用户进程空间内改变过优先级的进程占用CPU百分比
98.7%id空闲CPU百分比
0.0%wa等待输入输出的CPU时间百分比
0.0%hi
0.0%si
最后两行为内存信息。内容如下：
Mem:191272ktotal物理内存总量
173656kused使用的物理内存总量
17616kfree空闲内存总量
22052kbuffers用作内核缓存的内存量
Swap:192772ktotal交换区总量
0kused使用的交换区总量
192772kfree空闲交换区总量
123988kcached缓冲的交换区总量。
内存中的内容被换出到交换区，而后又被换入到内存，但使用过的交换区尚未被覆盖，
该数值即为这些内容已存在于内存中的交换区的大小。
相应的内存再次被换出时可不必再对交换区写入。
进程信息区
统计信息区域的下方显示了各个进程的详细信息。首先来认识一下各列的含义。
序号列名含义
aPID进程id
bPPID父进程id
cRUSERRealusername
dUID进程所有者的用户id
eUSER进程所有者的用户名
fGROUP进程所有者的组名
gTTY启动进程的终端名。不是从终端启动的进程则显示为?
hPR优先级
iNInice值。负值表示高优先级，正值表示低优先级
jP最后使用的CPU，仅在多CPU环境下有意义
k%CPU上次更新到现在的CPU时间占用百分比
lTIME进程使用的CPU时间总计，单位秒
mTIME+进程使用的CPU时间总计，单位1/100秒
n%MEM进程使用的物理内存百分比
oVIRT进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES
pSWAP进程使用的虚拟内存中，被换出的大小，单位kb。
qRES进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA
rCODE可执行代码占用的物理内存大小，单位kb
sDATA可执行代码以外的部分(数据段+栈)占用的物理内存大小，单位kb
tSHR共享内存大小，单位kb
unFLT页面错误次数
vnDRT最后一次写入到现在，被修改过的页面数。
wS进程状态。
D=不可中断的睡眠状态
R=运行
S=睡眠
T=跟踪/停止
Z=僵尸进程
xCOMMAND命令名/命令行
yWCHAN若该进程在睡眠，则显示睡眠中的系统函数名
zFlags任务标志，参考sched.h
默认情况下仅显示比较重要的PID、USER、PR、NI、VIRT、RES、SHR、S、%CPU、%MEM、TIME+、COMMAND列。可以通过下面的快捷键来更改显示内容。
更改显示内容
通过f键可以选择显示的内容。按f键之后会显示列的列表，按a-z即可显示或隐藏对应的列，最后按回车键确定。
按o键可以改变列的显示顺序。按小写的a-z可以将相应的列向右移动，而大写的A-Z可以将相应的列向左移动。最后按回车键确定。
按大写的F或O键，然后按a-z可以将进程按照相应的列进行排序。而大写的R键可以将当前的排序倒转。
命令使用
1．工具（命令）名称
top
2．工具（命令）作用
显示系统当前的进程和其他状况；top是一个动态显示过程,即可以通过用户按键来不断刷新当前状态.如果在前台执行该命令,它将独占前台,直到用户终止该程序为止.比较准确的说,top命令提供了实时的对系统处理器的状态监视.它将显示系统中CPU最“敏感”的任务列表.该命令可以按CPU使用.内存使用和执行时间对任务进行排序；而且该命令的很多特性都可以通过交互式命令或者在个人定制文件中进行设定.
3．环境设置
在Linux下使用。
4．使用方法
4．1使用格式
top[-][d][p][q][c][C][S][s][n]
4．2参数说明
d指定每两次屏幕信息刷新之间的时间间隔。当然用户可以使用s交互命令来改变之。
p通过指定监控进程ID来仅仅监控某个进程的状态。
q该选项将使top没有任何延迟的进行刷新。如果调用程序有超级用户权限，那么top将以尽可能高的优先级运行。
S指定累计模式
s使top命令在安全模式中运行。这将去除交互命令所带来的潜在危险。
i使top不显示任何闲置或者僵死进程。
c显示整个命令行而不只是显示命令名
4.3其他
下面介绍在top命令执行过程中可以使用的一些交互命令。从使用角度来看，熟练的掌握这些命令比掌握选项还重要一些。这些命令都是单字母的，如果在命令行选项中使用了s选项，则可能其中一些命令会被屏蔽掉。
Ctrl+L擦除并且重写屏幕。
h或者?显示帮助画面，给出一些简短的命令总结说明。
k终止一个进程。系统将提示用户输入需要终止的进程PID，以及需要发送给该进程什么样的信号。一般的终止进程可以使用15信号；如果不能正常结束那就使用信号9强制结束该进程。默认值是信号15。在安全模式中此命令被屏蔽。
i忽略闲置和僵死进程。这是一个开关式命令。
q退出程序。
r重新安排一个进程的优先级别。系统提示用户输入需要改变的进程PID以及需要设置的进程优先级值。输入一个正值将使优先级降低，反之则可以使该进程拥有更高的优先权。默认值是10。
S切换到累计模式。
s改变两次刷新之间的延迟时间。系统将提示用户输入新的时间，单位为s。如果有小数，就换算成ms。输入0值则系统将不断刷新，默认值是5s。需要注意的是如果设置太小的时间，很可能会引起不断刷新，从而根本来不及看清显示的情况，而且系统负载也会大大增加。
f或者F从当前显示中添加或者删除项目。
o或者O改变显示项目的顺序。
l切换显示平均负载和启动时间信息。
m切换显示内存信息。
t切换显示进程和CPU状态信息。
c切换显示命令名称和完整命令行。
M根据驻留内存大小进行排序。
P根据CPU使用百分比大小进行排序。
T根据时间/累计时间进行排序。
W将当前设置写入~/.toprc文件中。这是写top配置文件的推荐方法。
4、任务调度器
进程cpu资源分配就是指进程的优先权（priority）。优先权高的进程有优先执行权利。配置进程优先权对多任务环境的linux很有用，可以改善系统性能。还可以把进程运行到指定的CPU上，这样一来，把不重要的进程安排到某个CPU，可以大大改善系统整体性能。
一、先看系统进程：
[root@dbbakroot]#ps–l---这里用的是linux测试
FSUIDPIDPPIDCPRINIADDRSZWCHANTTYTIMECMD
4S020538205340750-1063wait4pts/200:00:00bash
4R020663205380750-828-pts/200:00:00ps
我们很容易注意到其中的几个重要信息，有下：
UID:代表执行者的身份
PID:代表这个进程的代号
PPID：代表这个进程是由哪个进程发展衍生而来的，亦即父进程的代号
PRI：代表这个进程可被执行的优先级，其值越小越早被执行
NI：代表这个进程的nice值
这里的前面的三个信息，我们都是比较好容易理解的，但是后面的两个奇怪的信息，一个是PRI，一个是NI，这到底是什么东西？相对而言，PRI也还是比较好理解的，即进程的优先级，或者通俗点说就是程序被CPU执行的先后顺序，此值越小进程的优先级别越高。那NI呢？就是我们所要说的nice值了，其表示进程可被执行的优先级的修正数值。如前面所说，PRI值越小越快被执行，那么加入nice值后，将会使得PRI变为：PRI(new)=PRI(old)+nice。这样，当nice值为负值的时候，那么该程序将会优先级值将变小，即其优先级会变高，则其越快被执行。
到目前为止，更需要强调一点的是，进程的nice值不是进程的优先级，他们不是一个概念，但是进程nice值会影响到进程的优先级变化。
—————————————————————————
